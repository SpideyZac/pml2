[{"filePath":"index.html","action":"modify","patchText":"@@ -1089,2013 +1089,8 @@\n t%22%3E%0A\n-            /**%0A             * Registers the service worker and sends the virtual file system (vfs) once ready.%0A             */%0A            window.addEventListener(%22load%22, () =%3E %7B%0A                if (%22serviceWorker%22 in navigator) %7B%0A                    navigator.serviceWorker%0A                        .register(%22/sw.js%22, %7B scope: %22/%22 %7D)%0A                        .then((registration) =%3E %7B%0A                            console.log(%0A                                %22ServiceWorker registration successful with scope:%22,%0A                                registration.scope%0A                            );%0A                        %7D)%0A                        .catch((error) =%3E %7B%0A                            console.error(%0A                                %22ServiceWorker registration failed:%22,%0A                                error%0A                            );%0A                        %7D);%0A%0A                    navigator.serviceWorker.ready.then((registration) =%3E %7B%0A                        if (!registration.active) %7B%0A                            console.warn(%22ServiceWorker is not active yet.%22);%0A                        %7D%0A                        console.log(%22ServiceWorker is ready:%22, registration);%0A%0A                        // Send the VFS files to the service worker for caching or serving%0A                        if (window.vfs && window.vfs.files) %7B%0A                            registration.active.postMessage(%7B%0A                                vfs: window.vfs.files,%0A                                type: %22vfs%22,%0A                            %7D);%0A                        %7D else %7B%0A                            console.warn(%0A                                %22VFS not available to send to ServiceWorker.%22%0A                            );%0A                        %7D%0A                    %7D);%0A                %7D%0A            %7D);%0A%0A            // If document is already loaded, manually dispatch 'load' event%0A            if (document.readyState === %22complete%22) %7B%0A                window.dispatchEvent(new Event(%22load%22));%0A            %7D%0A%0A\n     \n","fileType":"text"}]